<div class="container-fluid">

  <tabs>
    <pane data-ng-repeat="pane in panes">
      <div data-ng-include src="pane.content_url"></div>
    </pane>
    <pane title="Step 1: Shows">
      <h3>Select the shows you want to see</h3>
      <input type="checkbox" data-ng-model="groupByVenue"/> Group shows by venue
      <br />
      <br />

      <ul data-ng-show="groupByVenue">
        <li data-ng-repeat="group in showGroups">
          <h5>{{ group.venueName }}</h5>
          <table class="table table-bordered">
            <tr data-ng-repeat="show in group.shows | orderBy: 'title'">
              <td class="selectable" data-ng-class="{selected:show.selected}" data-ng-click="toggleSelectShow(show)">
                {{ show.title }}
              </td>
            </tr>
          </table>
        </li>
      </ul>

      <div data-ng-hide="groupByVenue">
        Search by title:
        <br />
        <input type="text" placeholder="Show title..." data-ng-model="search_name"/>
        <br />
  
        <table class="table table-bordered">
          <tr data-ng-repeat="show in shows | filter:search_name | orderBy: 'title'">
            <td class="selectable" data-ng-class="{selected:show.selected}" data-ng-click="toggleSelectShow(show)">
              {{ show.title }} ({{ show.venue.name }})
            </td>
          </tr>
        </table>
      </div>
    </pane>

    <pane title="Step 2: Times">
      <h3>Select the times you can see shows</h3>
      <ul>
        <li data-ng-repeat="group in timeGroups">
          <h5>{{ group.dateString }}</h5>
          <table class="table table-bordered">
            <tr data-ng-repeat="time in group.options | orderBy: 'datetime'">
              <td class="selectable" data-ng-class="{selected:time.selected}" data-ng-click="toggleSelectTime(time)">{{ time.timeString }}</td>
            </tr>
          </table>
        </li>
      </ul>
    </pane>

    <pane title="Step 3: Schedule">
      <h3>Select when you want to see each show</h3>
      <ul>
        <li data-ng-repeat="dateGroup in showingGroups | orderBy: 'date'">
          <h5>{{ dateGroup.dateString }}</h5>
          <div data-ng-repeat="timeGroup in dateGroup.timeGroups | orderBy: 'time'">
            <h6>{{ timeGroup.timeString }}</h5>
            <table class="table table-bordered">
              <tr data-ng-repeat="showing in timeGroup.showings | orderBy: 'time.datetime'">
                <td class="selectable" data-ng-class="{selected:showing.selected}" data-ng-click="toggleSelectShowing(showing)">
                  {{ showing.show.title }} ({{ showing.show.venue.name }})
                </td>
              </tr>
            </table>
          </div>
        </li>
      </ul>
    </pane>
  </tabs>
</div>
